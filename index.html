<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hyderabad Connext</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>

/* ================= ROOT COLORS ================= */
:root{
    --blue:#0B3D91;
    --green:#138808;
    --light:#f4f6f9;
    --dark:#0e1a25;
    --card-light:#ffffff;
    --card-dark:#1c2b38;
}

/* ================= GLOBAL ================= */
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:var(--light);
    transition:0.3s;
}

/* ================= HEADER ================= */
header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 25px;
    background:linear-gradient(90deg,var(--blue),var(--green));
    color:white;
}

.logo-section{
    display:flex;
    align-items:center;
    gap:12px;
}

.logo-section img{
    height:50px;
}

.controls button{
    margin-left:8px;
    padding:6px 12px;
    border:none;
    border-radius:6px;
    cursor:pointer;
}

/* ================= GRID LAYOUT ================= */
.dashboard{
    display:grid;
    grid-template-columns: 250px 1fr 350px;
    height:calc(100vh - 80px);
}

/* LEFT MENU */
.sidebar{
    background:#111;
    color:white;
    padding:20px;
}

.sidebar button{
    width:100%;
    margin-bottom:10px;
    padding:10px;
    background:#222;
    border:none;
    color:white;
    cursor:pointer;
    border-radius:6px;
}

/* CENTER MAP */
#map{
    height:100%;
}

/* RIGHT PANEL */
.panel{
    padding:15px;
    overflow-y:auto;
    background:var(--card-light);
}

/* CARD */
.card{
    background:var(--card-light);
    padding:12px;
    border-radius:10px;
    margin-bottom:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

/* SEARCH */
#search{
    width:100%;
    padding:8px;
    margin-bottom:15px;
}

/* DARK MODE */
.dark{
    background:var(--dark);
    color:white;
}

.dark .panel{
    background:var(--card-dark);
}

.dark .card{
    background:#243645;
}

/* FOOTER */
footer{
    position:relative;
    background:#000;
    color:white;
    padding:15px;
    text-align:center;
}

.india-logo{
    position:absolute;
    left:15px;
    bottom:10px;
    height:35px;
}

/* MOBILE */
@media(max-width:900px){
    .dashboard{
        grid-template-columns:1fr;
    }
    .sidebar{
        display:flex;
        overflow-x:auto;
    }
    #map{
        height:400px;
    }
}

</style>
</head>

<body>

<header>
    <div class="logo-section">
        <img src="assets/tgsrtc-logo.png">
        <h2 id="title">Hyderabad Connext - City Bus Tracking</h2>
    </div>

    <div class="controls">
        <button onclick="toggleLanguage()">üåê English/‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
        <button onclick="toggleMode()">üåô Mode</button>
    </div>
</header>

<div class="dashboard">

    <!-- LEFT MENU -->
    <div class="sidebar">
        <button onclick="loadSheet('live')">Journey Planner</button>
        <button onclick="loadSheet('depot')">Track A Bus</button>
        <button onclick="loadSheet('alerts')">Track A Live Route</button>
        <button onclick="loadSheet('routes')">Time Table</button>
        <button onclick="loadSheet('routes')">Feedback</button>
    </div>

    <!-- MAP -->
    <div id="map"></div>

    <!-- RIGHT PANEL -->
    <div class="panel">
        <input type="text" id="search" placeholder="Search Vehicle">
        <div id="dataCards"></div>
    </div>

</div>

<footer>
    <img src="assets/india-logo.png" class="india-logo">
    ¬© 2026 friends.of.rtc
</footer>

<script>

/* ================= MAP ================= */
var map=L.map('map').setView([17.3850,78.4867],8);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'¬© OpenStreetMap'
}).addTo(map);

let markers=[];

/* ================= SHEET LINKS ================= */
const sheets={
    live:"YOUR_LIVE_SHEET_CSV",
    depot:"YOUR_DEPOT_SHEET_CSV",
    alerts:"YOUR_ALERT_SHEET_CSV",
    routes:"YOUR_ROUTE_SHEET_CSV"
};

/* ================= LOAD SHEET ================= */
function loadSheet(type){

    fetch(sheets[type])
    .then(res=>res.text())
    .then(data=>{
        const rows=data.split("\n").slice(1);
        const container=document.getElementById("dataCards");
        container.innerHTML="";
        markers.forEach(m=>map.removeLayer(m));
        markers=[];

        rows.forEach(row=>{
            const cols=row.split(",");
            const name=cols[0];
            const lat=parseFloat(cols[1]);
            const lon=parseFloat(cols[2]);

            const card=document.createElement("div");
            card.className="card";
            card.innerHTML=`<b>${name}</b>`;
            container.appendChild(card);

            if(!isNaN(lat) && !isNaN(lon)){
                const marker=L.marker([lat,lon]).addTo(map)
                .bindPopup(name);
                markers.push(marker);
            }
        });
    });
}

/* AUTO REFRESH */
setInterval(()=>loadSheet('live'),30000);

/* SEARCH */
document.getElementById("search").addEventListener("keyup",function(){
    const val=this.value.toLowerCase();
    document.querySelectorAll(".card").forEach(card=>{
        card.style.display=card.innerText.toLowerCase().includes(val)?"":"none";
    });
});

/* DARK MODE */
function toggleMode(){
    document.body.classList.toggle("dark");
}

/* LANGUAGE */
let telugu=false;
function toggleLanguage(){
    telugu=!telugu;
    document.getElementById("title").innerText=
        telugu?"‡∞π‡±à‡∞¶‡∞∞‡∞æ‡∞¨‡∞æ‡∞¶‡±ç ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç‡∞ü‡±ç - ‡∞∏‡∞ø‡∞ü‡±Ä ‡∞¨‡∞∏‡±ç ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç":
        "Hyderabad Connext - City Bus Tracking";
}

/* LOAD DEFAULT */
loadSheet('live');

</script>

</body>
</html>




